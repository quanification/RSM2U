<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>RSM2U - Local Delivery Services</title>
  <link rel="stylesheet" href="style.css" />
  <script src="https://cdn.auth0.com/js/auth0-spa-js/1.13/auth0-spa-js.production.js"></script>
</head>
<body>
  <header class="hero">
    <h1>RSM2U</h1>
    <p>Local, Affordable Delivery for Groceries and Restaurants in South Orange County</p>
    <a href="how-it-works.html" class="button">How It Works</a>
    <button id="btn-login" class="button">Login</button>
    <button id="btn-logout" class="button" style="display:none;">Logout</button>
  </header>

  <main>
    <section>
      <h2>What We Do</h2>
      <p>RSM2U is your personal delivery service for grocery, restaurant, and essential pickups. We shop or pick up on your behalf and deliver directly to your doorstep—without the high fees of national apps.</p>
    </section>

    <section>
      <h2>Why Choose RSM2U?</h2>
      <ul>
        <li>✅ Experienced local drivers</li>
        <li>✅ Lower costs than app-based services</li>
        <li>✅ Personal, text-based communication</li>
        <li>✅ No surprise fees or cancellations</li>
      </ul>
    </section>

    <section>
      <h2>Where We Deliver</h2>
      <p>We proudly serve Rancho Santa Margarita, Robinson Ranch, Dove Canyon, and Coto de Caza.</p>
    </section>

    <section class="cta">
      <h2>Ready to Place an Order?</h2>
      <p><a href="/order.html" class="button">Place Order</a></p>
    </section>
  </main>

  <footer>
    <p>&copy; 2025 RSM2U. All rights reserved.</p>
  </footer>

  <script>
    let auth0Client;

    const initAuth0 = async () => {
      auth0Client = await createAuth0Client({
        domain: "dev-snnjvf62qw1438rq.us.auth0.com", // e.g. dev-123abc.us.auth0.com
        client_id: "LetLfQ5N9xxeSu8mA6WpZkI9TeBZV7xM", // e.g. aBc123456XYZ
        cacheLocation: "localstorage"
      });

      const isAuthenticated = await auth0Client.isAuthenticated();

      if (isAuthenticated) {
        document.getElementById("btn-login").style.display = "none";
        document.getElementById("btn-logout").style.display = "inline-block";
        window.location.href = "/members.html";
      }
    };

    window.onload = async () => {
      await initAuth0();

      document.getElementById("btn-login").addEventListener("click", async () => {
        await auth0Client.loginWithPopup();
        const isAuthenticated = await auth0Client.isAuthenticated();
        if (isAuthenticated) {
          window.location.href = "/members.html";
        }
      });

      document.getElementById("btn-logout").addEventListener("click", () => {
        auth0Client.logout({
          returnTo: window.location.origin
        });
      });
    };
  </script>
</body>
</html>
